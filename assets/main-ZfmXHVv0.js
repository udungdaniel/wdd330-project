import{l as p}from"./utils-B3jpzjNX.js";import{P}from"./productData-BDL79EoI.js";function o(e){return`$${e.toFixed(2)}`}function y(e){const s=document.createElement("span");return s.className="discount-indicator",s.textContent=`-${e}% OFF`,s}function g(e){document.querySelectorAll(".product-card").forEach(n=>{const t=n.querySelector(".card__name").textContent.trim(),d=n.querySelector(".card__brand").textContent.trim(),a=e.find(c=>c.NameWithoutBrand===t&&c.Brand.Name===d);if(!a)return;const r=n.querySelector(".product-card__price");if(a.FinalPrice<a.SuggestedRetailPrice){const c=Math.round((a.SuggestedRetailPrice-a.FinalPrice)/a.SuggestedRetailPrice*100);r.parentElement.insertBefore(y(c),r);const i=document.createElement("span");i.className="old-price",i.textContent=o(a.SuggestedRetailPrice),r.innerHTML=`<span class="new-price">${o(a.FinalPrice)}</span>`,r.insertBefore(i,r.firstChild)}else r.textContent=o(a.FinalPrice)})}function h(){return new URLSearchParams(window.location.search).get("category")||"tents"}function $(e){switch(e){case"tents":return"Tents";case"backpacks":return"Backpacks";case"sleeping-bags":return"Sleeping Bags";case"hammocks":return"Hammocks";default:return"Products"}}function B(e){return e.Images&&e.Images.PrimaryLarge?e.Images.PrimaryLarge:e.Image?e.Image:""}function F(e,s){const n=document.getElementById("product-list");n.innerHTML="",e.forEach(t=>{const d=B(t),a=t.Brand&&t.Brand.Name||t.Brand||"",r=t.NameWithoutBrand||t.Name||"",c=t.FinalPrice||t.ListPrice||t.SuggestedRetailPrice||0,i=t.SuggestedRetailPrice||t.ListPrice||0;let u="",m=`<span class='new-price'>${o(c)}</span>`;i>c&&(u=`<span class="discount">-${Math.round((i-c)/i*100)}% OFF</span>`,m=`<span class='old-price'>${o(i)}</span> <span class='new-price'>${o(c)}</span>`);const f=t.Id,l=document.createElement("li");l.className="product-card",l.innerHTML=`
      ${u}
      <a href="../product_pages/index.html?id=${f}&category=${s}">
        <img src="${d}" alt="${r}" />
        <h3 class="card__brand">${a}</h3>
        <h2 class="card__name">${r}</h2>
        <p class="product-card__price"> ${m}</p>
      </a>
    `,n.appendChild(l)})}async function S(){const e=h();document.getElementById("category-title").textContent=$(e);let n=await new P(e).getData();n.Result&&(n=n.Result),F(n,e)}document.getElementById("product-list")&&S();async function C(){await p()}function L(){typeof g=="function"&&g()}function _(){typeof renderDiscounts=="function"&&renderDiscounts()}async function w(){await C(),L(),_()}document.addEventListener("DOMContentLoaded",w);
