import"./utils-DKSz241K.js";/* empty css              */import"./main-B-p1hmyG.js";import{P}from"./productData-vyC4-ngc.js";function d(r){return`$${r.toFixed(2)}`}async function u(){const r=["tents","backpacks","sleeping-bags","hammocks"];let t=[];for(const s of r){const e=await new P(s).getData(),n=(Array.isArray(e)?e:e.Result||[]).map(a=>({...a,_category:s}));t=t.concat(n)}return t}function f(r){const t=r.filter(e=>(e.FinalPrice||e.ListPrice||e.SuggestedRetailPrice)&&e.Id&&typeof e.Id=="string"&&e.Id.trim()!=="").sort((e,n)=>(e.FinalPrice||e.ListPrice||e.SuggestedRetailPrice)-(n.FinalPrice||n.ListPrice||n.SuggestedRetailPrice)).slice(0,4),s=document.getElementById("top-products-list");s&&(s.innerHTML="",t.forEach(e=>{const n=e.Images&&e.Images.PrimaryLarge||e.Image||"",a=e.Brand&&e.Brand.Name||e.Brand||"",c=e.NameWithoutBrand||e.Name||"",i=e.FinalPrice||e.ListPrice||e.SuggestedRetailPrice||0,o=e.SuggestedRetailPrice||e.ListPrice||0;let m="",g=`<span class='new-price'>${d(i)}</span>`;o>i&&(m=`<span class='discount-indicator'>-${Math.round((o-i)/o*100)}% OFF</span>`,g=`<span class='old-price'>${d(o)}</span> <span class='new-price'>${d(i)}</span>`);const p=e.Id,h=e._category||"tents",l=document.createElement("li");l.className="product-card",l.innerHTML=`
      <a href="product_pages/index.html?id=${p}&category=${h}">
        <img src="${n}" alt="${c}" />
        <h3 class="card__brand">${a}</h3>
        <h2 class="card__name">${c}</h2>
        <p class="product-card__price">${m} ${g}</p>
      </a>
    `,s.appendChild(l)}))}document.getElementById("top-products-list")&&u().then(f);class y{constructor(t="./json/alerts.json"){this.jsonPath=t}async showAlerts(){try{const t=await fetch(this.jsonPath);if(!t.ok)return;const s=await t.json();if(!s||!s.length)return;const e=document.createElement("section");e.className="alert-list",s.forEach(a=>{const c=document.createElement("p");c.textContent=a.message,c.style.background=a.background,c.style.color=a.color,e.appendChild(c)});const n=document.querySelector("main");n&&n.prepend(e)}catch(t){console.error("Failed to load alerts:",t)}}}new y("./json/alerts.json").showAlerts();
