import{l as p}from"./utils-CQY4PpNB.js";import{P as f}from"./productData-BDL79EoI.js";function o(e){return`$${e.toFixed(2)}`}function P(e){const r=document.createElement("span");return r.className="discount-indicator",r.textContent=`-${e}% OFF`,r}function h(e){document.querySelectorAll(".product-card").forEach(n=>{const t=n.querySelector(".card__name").textContent.trim(),l=n.querySelector(".card__brand").textContent.trim(),a=e.find(s=>s.NameWithoutBrand===t&&s.Brand.Name===l);if(!a)return;const c=n.querySelector(".product-card__price");if(a.FinalPrice<a.SuggestedRetailPrice){const s=Math.round((a.SuggestedRetailPrice-a.FinalPrice)/a.SuggestedRetailPrice*100);c.parentElement.insertBefore(P(s),c);const i=document.createElement("span");i.className="old-price",i.textContent=o(a.SuggestedRetailPrice),c.innerHTML=`<span class="new-price">${o(a.FinalPrice)}</span>`,c.insertBefore(i,c.firstChild)}else c.textContent=o(a.FinalPrice)})}function y(){return new URLSearchParams(window.location.search).get("category")||"tents"}function S(e){switch(e){case"tents":return"Tents";case"backpacks":return"Backpacks";case"sleeping-bags":return"Sleeping Bags";case"hammocks":return"Hammocks";default:return"Products"}}function $(e){return e.Images&&e.Images.PrimaryLarge?e.Images.PrimaryLarge:e.Image?e.Image:""}function B(e,r){const n=document.getElementById("product-list");n.innerHTML="",e.forEach(t=>{const l=$(t),a=t.Brand&&t.Brand.Name||t.Brand||"",c=t.NameWithoutBrand||t.Name||"",s=t.FinalPrice||t.ListPrice||t.SuggestedRetailPrice||0,i=t.SuggestedRetailPrice||t.ListPrice||0;let m="",u=`<span class='new-price'>${o(s)}</span>`;i>s&&(m=`<span class="discount">-${Math.round((i-s)/i*100)}% OFF</span>`,u=`<span class='old-price'>${o(i)}</span> <span class='new-price'>${o(s)}</span>`);const g=t.Id,d=document.createElement("li");d.className="product-card",d.innerHTML=`
      ${m}
      <a href="../product_pages/index.html?id=${g}&category=${r}">
        <img src="${l}" alt="${c}" />
        <h3 class="card__brand">${a}</h3>
        <h2 class="card__name">${c}</h2>
        <p class="product-card__price"> ${u}</p>
      </a>
    `,n.appendChild(d)})}async function F(){const e=y();document.getElementById("category-title").textContent=S(e);let n=await new f(e).getData();n.Result&&(n=n.Result),B(n,e)}document.getElementById("product-list")&&F();p();h();setTimeout(()=>{const e=JSON.parse(localStorage.getItem("so-cart"))||[],r=document.getElementById("cart-count");r.innerHTML=e.length},2e3);
